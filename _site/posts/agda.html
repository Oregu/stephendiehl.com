<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>

    <!-- Basic Page Needs
  ================================================== -->
    <meta charset="utf-8">
    <title>Agda Tutorial</title>
    <meta name="description" content="{{description}}">
    <meta name="author" content="{{author}}">

    <!-- Mobile Specific Metas
  ================================================== -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!-- CSS
  ================================================== -->
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/skeleton.css">
    <link rel="stylesheet" href="../css/typography.css">
    <link rel="stylesheet" href="../css/layout.css">
    <link rel="stylesheet" href="../css/syntax.css">
    <link rel="stylesheet" href="../css/custom.css">

    <link href="http://fonts.googleapis.com/css?family=Droid+Sans:400,700|Droid+Serif:400,400italic|Inconsolata" rel="stylesheet">
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX", "output/HTML-CSS"],
        tex2jax: {
          inlineMath: [ ['$','$'], ['\\(','\\)'] ],
          // Needs to escaped for Pandoc
          displayMath: [ ["\\[","\\]"] ],
          processEscapes: true
        },
        "HTML-CSS": { availableFonts: ["TeX"] },

        TeX: {
            Macros: {
                cat : ["\\mathcal{#1}", 1],
                ob  : ["\\mathrm{ob}(#1)", 1],
                hom : ["\\mathrm{hom}(#1)", 1],
                id  : ["\\text{id}_{#1}", 1],
                C   : "\\mathcal{C}",
                D   : "\\mathcal{D}",

                iso    : "{\cong}\)",
                Hask   : "{\cat{Hask}}\)",
                yoneda : "{\mathcal{Y}}\)",

                dom: ["{\text{dom}(#1)}\)", 1],
                cod: ["{\text{cod}(#1)}\)", 1],
            }
        }
      });
    </script>

    <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Favicons
    ================================================== -->
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">

</head>
<body>

<div style="display:none">
<p>Category Theory Definitions for Haskell Programmers</p>
</div>

    <!-- Primary Page Layout
    ================================================== -->

    <div class="container">
        <div class="three columns sidebar">
            <nav>
                <h3 id="logo">Stephen Diehl</h3>
                <ul>
                    <li><a href="../">Index</a></li>
                    <li><a href="../pages/slides.html">Talks</a></li>
                    <li><a href="../posts.html">Writings</a></li>
                    <li><a href="../pages/projects.html">Projects</a></li>
                    <li><a href="../pages/hire.html">Contact Me</a></li>
                    <li><a href="../pages/pgp.html">PGP Key</a></li>
                    <li><a href="https://github.com/sdiehl">Github</a></li>
                    <li><a href="https://twitter.com/#!/smdiehl">Twitter</a></li>
                </ul>
            </nav>
             
        </div>

        <div class="twelve columns offset-by-one content">
            <h3 id="agda-tutorial">Agda Tutorial</h3>
<p>There wasn’t much information on about bootstrapping an Agda installation so I figured I’d write a quick guide. I’m assuming you have the neccesary Haskell infastructure in place.</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ cabal <span class="kw">install</span> agda agda-executable</code></pre>
<p>For integration with Emacs run</p>
<pre class="sourceCode bash"><code class="sourceCode bash">agda-mode setup</code></pre>
<p><br /> Then download and install the standard library to <code>AgdaLibrary</code> or yoru directory of choice.</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">wget</span> http://www.cse.chalmers.se/~nad/software/lib-0.7.tar.gz
$ <span class="kw">tar</span> xzf lib-0.7.tar.gz
$ <span class="kw">mkdir</span> ~/AgdaLibrary
$ <span class="kw">cp</span> -R lib-0.6/src ~/AgdaLibrary</code></pre>
<p><br /> Create a file <code>Fibonacci.agda</code> with the contents:</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">module</span> <span class="dt">Fibonacci</span> <span class="kw">where</span>

open <span class="kw">import</span> <span class="dt">Data.Nat</span>

fib <span class="fu">:</span> ℕ <span class="ot">→</span> ℕ
fib <span class="dv">0</span> <span class="fu">=</span> <span class="dv">0</span>
fib <span class="dv">1</span> <span class="fu">=</span> <span class="dv">1</span>
fib (suc (suc n)) <span class="fu">=</span> fib (suc n) <span class="fu">+</span> fib n</code></pre>
<pre class="sourceCode bash"><code class="sourceCode bash">$ agda --compile --include-path=<span class="st">&quot;~/AgdaLibrary&quot;</span> --include-path=<span class="st">&quot;.&quot;</span> Fibonacci.agda</code></pre>
<p>It type checks.</p>
<h3 id="interactive-editing">Interactive Editing</h3>
<p>Create a empty File “Interactive.agda” and open it with Emacs.</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ emacs Interactive.agda</code></pre>
<p>Start by entering the following following module:</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">module</span> <span class="dt">Interactive</span> <span class="kw">where</span></code></pre>
<p>Load the code into interactive session by Pressing <code>Ctrl-c Ctrl-l</code>.</p>
<p>Agda uses unicode prolifically and Emacs can automaticlly translate some common latex shortcuts to unicode:</p>
<table>
<tr>
<td>
<code>\to</code>
</td>
<td>
→
</td>
</tr>
<tr>
<td>
<code>\bn</code>
</td>
<td>
ℕ
</td>
</tr>
<tr>
<td>
<code>\all</code>
</td>
<td>
∀
</td>
</tr>
</table>


<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">data</span> ℕ <span class="fu">:</span> <span class="dt">Set</span> <span class="kw">where</span>
  zero <span class="fu">:</span> ℕ
  suc  <span class="fu">:</span> ℕ <span class="ot">→</span> ℕ</code></pre>
<p>For symbols that are not shortcut bound you can press <code>Ctrl-x 8 Return</code> and tab complete to see the available list of symbols.</p>
<p>Now to use the interactive mode, enter the following coe.</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="fu">id</span> <span class="fu">:</span> {<span class="dt">A</span> <span class="fu">:</span> <span class="dt">Set</span>} <span class="ot">→</span> <span class="dt">A</span> <span class="ot">→</span> <span class="dt">A</span>
<span class="fu">id</span> a <span class="fu">=</span> <span class="fu">?</span></code></pre>
<p>Loading this with <code>Ctrl-c Ctrl-l</code> will tell agda to replace the Hole <code>?</code> with a anonymous metavariable <code>{ }0</code>. This is the value we aim to determine. Highlighting the hole and typing <code>Ctrl-c Ctrl-,</code> will show the corresponding goals needed to finish the program.</p>
<pre class="sourceCode bash"><code class="sourceCode bash">Goal: .A
————————————————————————————————————————————————————————————
a  <span class="kw">:</span> .A
.A <span class="kw">:</span> Set</code></pre>
<p>Of course the id function expression can only inhabited by one value, namely <code>a</code>.</p>
<p>We can attempt to substitute a value into the hole by pressing <code>Ctrl-c Ctrl-Space</code> which will prompt you for a value. For example if we attempt to provide <code>zero</code> we will get the following type error:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">ℕ !=<span class="kw">&lt;</span> .A of <span class="kw">type</span> Set
when checking that the expression zero has <span class="kw">type</span> .A</code></pre>
<p>For cases this like this where the value is sufficiently constrained by the type agda can often automatically fill out the value by using the Auto tactic. Highlight the hole and fill and press <code>Ctrl-c Ctrl-a</code> to auto complete the implementation.</p>
<p>Now we define our Bool type.</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">data</span> <span class="dt">Bool</span> <span class="fu">:</span> <span class="dt">Set</span> <span class="kw">where</span>
  false <span class="fu">:</span> <span class="dt">Bool</span>
  true  <span class="fu">:</span> <span class="dt">Bool</span></code></pre>
<p>To write down an <code>and</code> function there are two combinations of arguments we have to deal with, namely <code>true false</code> and <code>false true</code>. Agda knows the types of the arguments and can write most of our function for us.</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="fu">and</span> <span class="fu">:</span> <span class="dt">Bool</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>
<span class="fu">and</span> a b <span class="fu">=</span> <span class="fu">?</span></code></pre>
<p>Highlighting the hole and pressing <code>Ctrl-c Ctrl-,</code> shows us the proof we need to complete.</p>
<pre class="sourceCode bash"><code class="sourceCode bash">Goal: Bool
————————————————————————————————————————————————————————————
b <span class="kw">:</span> Bool
a <span class="kw">:</span> Bool</code></pre>
<p>Highlighting the hole again and pressing <code>Ctrl-c Ctrl-c</code> will let us introduce a case for the first variable on the left hand side, in this case <code>b</code> first..</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="fu">and</span> <span class="fu">:</span> <span class="dt">Bool</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>
<span class="fu">and</span> a false <span class="fu">=</span> { }<span class="dv">0</span>
<span class="fu">and</span> a true <span class="fu">=</span> { }<span class="dv">1</span></code></pre>
<p>We know how two hole for the each case. Highlighting the first and doign the same procedure will the fill in the cases for a.</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="fu">and</span> <span class="fu">:</span> <span class="dt">Bool</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>
<span class="fu">and</span> false false <span class="fu">=</span> { }<span class="dv">0</span>
<span class="fu">and</span> false true <span class="fu">=</span> { }<span class="dv">1</span>
<span class="fu">and</span> true false <span class="fu">=</span> { }<span class="dv">2</span>
<span class="fu">and</span> true true <span class="fu">=</span> { }<span class="dv">3</span></code></pre>
<p>We need then only fill in the right hand sides.</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="fu">and</span> <span class="fu">:</span> <span class="dt">Bool</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span> <span class="ot">-&gt;</span> <span class="dt">Bool</span>
<span class="fu">and</span> false false <span class="fu">=</span> false
<span class="fu">and</span> false true <span class="fu">=</span> false
<span class="fu">and</span> true false <span class="fu">=</span> false
<span class="fu">and</span> true true <span class="fu">=</span> true</code></pre>
        </div>
    </div>

    <!-- JS
    ================================================== -->
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>

<!-- End Document
================================================== -->
</body>
